---
default_enabled_projects:
  - "openstack-infra/devstack-gate"
  - "openstack-dev/devstack"
  - "openstack/glance"
  - "openstack/keystone"
  - "openstack/neutron"
  - "openstack/nova"
  - "openstack/requirements"
  - "openstack/tempest"
  - "openstack/tempest-lib"

devstack_gate_env_override: {}

devstack_gate_env:
  DEVSTACK_LOCAL_CONFIG: "{{ devstack_local_conf }}"
  DEVSTACK_GATE_PROJECTS_OVERRIDE:
    "{{ default_enabled_projects | join(' ') }} {{ projects | join(' ') }}"
  OVERRIDE_ZUUL_BRANCH: "{{ override_zuul_branch }}"
  PYTHONUNBUFFERED: true
  BUILD_TIMEOUT: 10800000
  DEVSTACK_GATE_TEMPEST: 1
  DEVSTACK_GATE_NEUTRON: 1
  DEVSTACK_GATE_SETTINGS: "{{ workspace }}/custom_devstack_gate_hook"
  DEVSTACK_GATE_FEATURE_MATRIX: "{{ workspace }}/features.yaml"
  DEVSTACK_GATE_TOPOLOGY:
    "{% if (groups['subnodes']|length) > 0 %}multinode{% else %}aio{% endif %}"
  OVERRIDE_REQUIREMENTS_PROJECT_BRANCH: |-
    {% if override_zuul_branch == 'newton-eol' -%}stable/newton
    {%- else -%}{{override_zuul_branch}}{%- endif -%}
  OVERRIDE_DEVSTACK_PROJECT_BRANCH: |-
    {% if override_zuul_branch == 'newton-eol' -%}stable/newton
    {%- else -%}{{override_zuul_branch}}{%- endif -%}
  OVERRIDE_NOVA_PROJECT_BRANCH: |-
    {% if override_zuul_branch == 'newton-eol' -%}stable/newton
    {%- else -%}{{override_zuul_branch}}{%- endif -%}

openstack_project_cherrypicks: {}

# yamllint disable rule:line-length
default_openstack_project_cherrypicks:
  all:
    devstack-gate:
      - "https://git.openstack.org/openstack-infra/devstack-gate refs/changes/25/523925/1"
# yamllint enable

run_devstack_gate_unstack: false
